<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trò Chơi Tìm Chữ Cái (Offline)</title>
    <style>
        /* * **THAY ĐỔI**: Toàn bộ CSS đã được viết lại để không cần tải từ Internet.
         * Font chữ được đổi thành loại phổ thông, có sẵn trên mọi máy tính.
        */
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif, Arial, sans-serif;
            background-color: #f0f9ff;
            margin: 0;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 896px; /* tương đương max-w-4xl */
            text-align: center;
        }

        h1 {
            font-size: 2.25rem; /* tương đương text-4xl */
            font-weight: 700;
            color: #2563eb; /* tương đương text-blue-600 */
            margin-bottom: 0.5rem;
        }

        #game-controls {
            margin-bottom: 1.5rem;
            height: 4rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #game-prompt {
            color: #374151; /* text-gray-700 */
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600;
        }

        button {
            margin-top: 1rem;
            padding: 0.75rem 2rem;
            color: white;
            font-weight: 700;
            border: none;
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }

        #start-game-btn { background-color: #f97316; } /* bg-orange-500 */
        #start-game-btn:hover { background-color: #ea580c; } /* hover:bg-orange-600 */

        #play-again-btn { background-color: #3b82f6; } /* bg-blue-500 */
        #play-again-btn:hover { background-color: #2563eb; } /* hover:bg-blue-600 */
        
        #alphabet-grid {
            display: grid;
            gap: 1rem;
            background-color: white;
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            grid-template-columns: repeat(4, 1fr);
        }

        /* Responsive grid cho các màn hình khác nhau */
        @media (min-width: 640px) { #alphabet-grid { grid-template-columns: repeat(5, 1fr); } }
        @media (min-width: 768px) { #alphabet-grid { grid-template-columns: repeat(7, 1fr); } }
        @media (min-width: 1024px) { #alphabet-grid { grid-template-columns: repeat(8, 1fr); } }

        .letter-box {
            color: white;
            font-size: 2.25rem;
            font-weight: 700;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1 / 1;
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out, background-color 0.2s;
        }
        .letter-box:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* **THAY ĐỔI**: Các lớp màu được định nghĩa sẵn */
        .bg-red { background-color: #ef4444; }
        .bg-blue { background-color: #3b82f6; }
        .bg-green { background-color: #22c55e; }
        .bg-yellow { background-color: #eab308; }
        .bg-purple { background-color: #8b5cf6; }
        .bg-pink { background-color: #ec4899; }
        .bg-indigo { background-color: #6366f1; }
        .bg-teal { background-color: #14b8a6; }
        .bg-orange { background-color: #f97316; }

        #win-screen.hidden, #alphabet-grid.hidden { display: none; }

        #win-screen p {
            font-size: 1.875rem;
            font-weight: 700;
            color: #16a34a; /* text-green-600 */
        }
        
        .footer-text {
            font-size: 0.75rem;
            color: #9ca3af; /* text-gray-400 */
            margin-top: 2rem;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); }
        }
        .shake { animation: shake 0.3s ease-in-out; }

        @keyframes celebrate {
            0% { transform: scale(1); } 50% { transform: scale(1.1) rotate(5deg); } 100% { transform: scale(1); }
        }
        .celebrate {
            animation: celebrate 0.5s ease-in-out;
            background-color: #15803d !important; /* Màu xanh lá đậm hơn khi đúng */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Trò Chơi Tìm Chữ Cái</h1>
        <div id="game-controls">
             <p id="game-prompt"></p>
             <button id="start-game-btn">Bắt đầu chơi!</button>
        </div>
        <div id="alphabet-grid"></div>
        <div id="win-screen" class="hidden">
            <p>Chúc mừng con đã hoàn thành!</p>
            <button id="play-again-btn">Chơi lại</button>
        </div>
        <p class="footer-text">Đọc bởi Gemini AI</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const alphabet = ['A', 'Ă', 'Â', 'B', 'C', 'D', 'Đ', 'E', 'Ê', 'G', 'H', 'I', 'K', 'L', 'M', 'N', 'O', 'Ô', 'Ơ', 'P', 'Q', 'R', 'S', 'T', 'U', 'Ư', 'V', 'X', 'Y'];
            // **THAY ĐỔI**: Danh sách các lớp màu được định nghĩa trong CSS
            const colors = ['bg-red', 'bg-blue', 'bg-green', 'bg-yellow', 'bg-purple', 'bg-pink', 'bg-indigo', 'bg-teal', 'bg-orange'];
            const phoneticMap = { 'A': 'a', 'Ă': 'ă', 'Â': 'â', 'B': 'bờ', 'C': 'cờ', 'D': 'dờ', 'Đ': 'đờ', 'E': 'e', 'Ê': 'ê', 'G': 'gờ', 'H': 'hờ', 'I': 'i', 'K': 'ca', 'L': 'lờ', 'M': 'mờ', 'N': 'nờ', 'O': 'o', 'Ô': 'ô', 'Ơ': 'ơ', 'P': 'pờ', 'Q': 'quờ', 'R': 'rờ', 'S': 'sờ', 'T': 'tờ', 'U': 'u', 'Ư': 'ư', 'V': 'vờ', 'X': 'xờ', 'Y': 'i' };

            const grid = document.getElementById('alphabet-grid');
            const gamePrompt = document.getElementById('game-prompt');
            const startGameBtn = document.getElementById('start-game-btn');
            const winScreen = document.getElementById('win-screen');
            const playAgainBtn = document.getElementById('play-again-btn');
            const gameControls = document.getElementById('game-controls');

            let vietnameseVoice = null;
            let shuffledAlphabet = [];
            let currentLetterIndex = 0;
            let gameActive = false;

            function loadAndSetVoice() {
                const voices = window.speechSynthesis.getVoices();
                if (!voices.length) return;
                const vietnameseVoices = voices.filter(voice => voice.lang === 'vi-VN');
                if (!vietnameseVoices.length) {
                    gamePrompt.textContent = "Lỗi: Không tìm thấy giọng đọc Tiếng Việt trên máy tính.";
                    startGameBtn.disabled = true;
                    return;
                };
                let femaleVoice = vietnameseVoices.find(voice => /nữ|female/i.test(voice.name));
                vietnameseVoice = femaleVoice || vietnameseVoices[0];
            }
            loadAndSetVoice();
            if (window.speechSynthesis.onvoiceschanged !== undefined) {
                window.speechSynthesis.onvoiceschanged = loadAndSetVoice;
            }

            function speak(text, rate = 0.9, pitch = 1.1) {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'vi-VN';
                    utterance.rate = rate;
                    utterance.pitch = pitch;
                    if (vietnameseVoice) utterance.voice = vietnameseVoice;
                    window.speechSynthesis.speak(utterance);
                }
            }

            alphabet.forEach(letter => {
                const letterDiv = document.createElement('div');
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                // **THAY ĐỔI**: Sử dụng các lớp CSS tự định nghĩa
                letterDiv.className = `letter-box ${randomColor}`;
                letterDiv.textContent = letter;
                letterDiv.setAttribute('data-letter', letter);
                grid.appendChild(letterDiv);
            });

            function askForNextLetter() {
                if (currentLetterIndex >= shuffledAlphabet.length) {
                    endGame();
                    return;
                }
                const letterToFind = shuffledAlphabet[currentLetterIndex];
                const phonetic = phoneticMap[letterToFind];
                const promptText = `Con hãy tìm chữ '${phonetic}'`;
                gamePrompt.textContent = promptText;
                speak(promptText);
            }

            function startGame() {
                gameActive = true;
                currentLetterIndex = 0;
                shuffledAlphabet = [...alphabet].sort(() => 0.5 - Math.random());
                gameControls.removeChild(startGameBtn);
                winScreen.classList.add('hidden');
                grid.classList.remove('hidden');
                askForNextLetter();
            }

            function endGame() {
                gameActive = false;
                grid.classList.add('hidden');
                winScreen.classList.remove('hidden');
                gamePrompt.textContent = "Con giỏi quá!";
                speak("Con giỏi quá! Chúc mừng con đã hoàn thành trò chơi!");
            }

            grid.addEventListener('click', (event) => {
                if (!gameActive || !event.target.classList.contains('letter-box')) return;
                
                const clickedBox = event.target;
                const clickedLetter = clickedBox.getAttribute('data-letter');
                const correctLetter = shuffledAlphabet[currentLetterIndex];

                if (clickedLetter === correctLetter) {
                    clickedBox.classList.add('celebrate');
                    speak("Đúng rồi!");
                    setTimeout(() => {
                        clickedBox.classList.remove('celebrate');
                        currentLetterIndex++;
                        askForNextLetter();
                    }, 1500);
                } else {
                    clickedBox.classList.add('shake');
                    speak("Sai rồi, thử lại nhé!");
                    setTimeout(() => {
                        clickedBox.classList.remove('shake');
                    }, 500);
                }
            });
            
            startGameBtn.addEventListener('click', startGame);
            playAgainBtn.addEventListener('click', () => {
                 // Reset lại giao diện để chơi lại từ đầu
                winScreen.classList.add('hidden');
                if(!document.getElementById('start-game-btn')){
                    gameControls.insertBefore(startGameBtn, gamePrompt);
                }
                gamePrompt.textContent = "";
                grid.classList.remove('hidden');
                startGame();
            });
        });
    </script>
</body>
</html>
